---
up:
  - "[[SpringSecurity 課程描述]]"
---
我们也可以在配置类中使用使用配置的方式对资源进行权限控制。

```java
@Bean
SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
	http
			// 关闭csrf
			.csrf(csrf -> csrf.disable())

			// 不通过Session获取SecurityContext
			.sessionManagement(sm -> sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS))

			.authorizeHttpRequests(auth -> auth
					.requestMatchers(HttpMethod.OPTIONS, "/**").permitAll()
					// 对于登录接口 允许匿名访问
					.requestMatchers(
							"/user/login"
					).permitAll()
					.requestMatchers("/testCors").hasAuthority("system:dept::list")
					// 除上面外的所有请求全部需要鉴权认证
					.anyRequest().authenticated()
			)

			//把token校验过滤器添加到过滤器链中
			.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class)

			// 自定义未授权和认证失败的处理类
			.exceptionHandling(ex -> ex
					.authenticationEntryPoint(authenticationEntryPoint)
					.accessDeniedHandler(accessDeniedHandler)
			)
			//允许跨域
			.cors(Customizer.withDefaults());

	return http.build();
}
```