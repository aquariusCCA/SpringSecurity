---
up:
  - "[[SpringSecurity 課程描述]]"
---
# SpringSecurity 完整流程

​SpringSecurity 的原理其实就是一个过滤器链，内部包含了提供各种功能的过滤器。这里我们可以看看入门案例中的过滤器。

![[认证/附件/image-20211214144425527.png]]

图中只展示了核心过滤器，其它的非核心过滤器并没有在图中展示。

**UsernamePasswordAuthenticationFilter**: 负责处理我们在登陆页面填写了用户名密码后的登陆请求。入门案例的认证工作主要有它负责。

**ExceptionTranslationFilter：** 处理过滤器链中抛出的任何 AccessDeniedException 和AuthenticationException 。

**FilterSecurityInterceptor：** 负责权限校验的过滤器。

我们可以通过 Debug 查看当前系统中 SpringSecurity 过滤器链中有哪些过滤器及它们的顺序。

![[认证/附件/image-20211214145824903.png]]

---

# 认证流程详解

![[3cb758c677cbdaa577fded471313dea5.png]]

概念速查:

Authentication 接口: 它的实现类，表示当前访问系统的用户，封装了用户相关信息。

AuthenticationManager 接口：定义了认证Authentication的方法 

UserDetailsService 接口：加载用户特定数据的核心接口。里面定义了一个根据用户名查询用户信息的方法。

UserDetails 接口：提供核心用户信息。通过 UserDetailsService 根据用户名获取处理的用户信息要封装成UserDetails对象返回。然后将这些信息封装到Authentication对象中。